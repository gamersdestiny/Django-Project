{%extends 'blog/base.html'%}

{%block content%}
	<h3>Blog Home</h3>

	{%for posts in dicpost %}
		<article class="media content-section">
			<a  href="{% url 'userProfile' posts.author %}"><img class='rounded-circle article-img' src='{{ posts.author.profile.image.url }}' alt="{{posts.author}}" ></a>
		  <div class="media-body">
		    <div class="article-metadata">
		      <small>posted on {{ posts.datePosted }}</small>
		      <a class="mr-2" href="{% url 'userPosts' posts.author.username %}">By-{{ posts.author }}</a>
		    </div>
		    <h2><a class="article-title" href="{% url 'postDetail' posts.id %}">{{ posts.title }}</a></h2>
		    <p class="article-content">{{ posts.shortDescription }}</p>
			<img id="postImage" src="{{posts.image.url}}" alt="{{ posts.title }}" onerror="this.style.display='none'" >
			<div id="likebutton">
				<button id="heartbtn" style=" border: none; outline: none; background-color: white; cursor: pointer;" >
					<span id="icon" style="color: red; border: none; outline: none; background-color: white; cursor: pointer;"><i class="far fa-heart"></i></span> like
				</button>
				<button id="heartbrkbtn" style=" border: none; outline: none; background-color: white; cursor: pointer;"  >
					<span id="icon" style="color: red; border: none; outline: none; background-color: white; cursor: pointer;"><i class="fas fa-heart-broken"></i></span> dislike
				</button>
				<script>				
				function clicked(){
					var count = 0;
						var btn = document.getElementById("heartbtn");
						var icon = document.getElementById("icon")
						icon.innerHTML = `<i class="fas fa-heart"></i>`
						btn.onclick = function () {
							if (count %2 === 0) {
								count++;
								icon.innerHTML = `<i class="far fa-heart"></i>`
							} else {
								count--
								icon.innerHTML = `<i class="fas fa-heart"></i>`
							}
						}
					}
				</script>
				</div>		    
		</div>
		  
		</article>
		
	{%endfor%}

	{% if page_obj.has_previous %}
	<a class="btn btn-outline-dark btn-sm" href="?page={{ page_obj.first }}">first</a>
	<a class="btn btn-outline-dark btn-sm" href="?page={{ page_obj.previous_page_number }}">previous</a>
	{% endif %}

	{% for pages in paginator.page_range %}
		{% if page_obj.number == pages %}
		<a class="btn btn-dark btn-sm" href="?page={{ pages }}">{{ pages }}</a>	
		{% elif pages > page_obj.number|add:'-4' and pages < page_obj.number|add:'4' %}
		<a class="btn btn-outline-dark btn-sm" href="?page={{ pages }}">{{ pages }}</a>	
		{% endif %}
	{% endfor %}

	{% if page_obj.has_next %}
		<a class="btn btn-outline-dark btn-sm" href="?page={{ page_obj.next_page_number }}">next</a>
		<a class="btn btn-outline-dark btn-sm" href="?page={{ page_obj.paginator.num_pages }}">last</a>
	{% endif %}

	<!-- {% if page_obj.has_next %}
		<a class="btn btn-outline-dark btn-sm" href="?page={{ page_obj.next_page_number }}">next</a>
	{% endif %} -->


{%endblock content%}
